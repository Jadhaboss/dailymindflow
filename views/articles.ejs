<!-- Hero -->
<div class="hero reveal">
    <h1>All Articles</h1>
    <p>Explore our entire collection of stories and ideas.</p>
</div>

<div class="container" style="padding-bottom: 80px;">

    <section class="posts-section">
        <div class="post-grid">
            <% data.forEach((post, index)=> { %>
                <article class="post-card glass-panel reveal" style="transition-delay: <%= index * 50 %>ms">
                    <a href="/post/<%= post._id %>" style="display: flex; flex-direction: column; height: 100%;">
                        <% if(post.image && post.image.trim() !=="" ) { %>
                            <div class="card-image-wrapper">
                                <img src="<%= post.image %>" alt="<%= post.title %>" loading="lazy">
                            </div>
                            <% } else { %>
                                <!-- Fallback Pattern -->
                                <div class="card-image-wrapper"
                                    style="background: linear-gradient(135deg, var(--surface-2) 0%, var(--border-color) 100%); display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-pen-nib" style="font-size: 3rem; opacity: 0.2;"></i>
                                </div>
                                <% } %>

                                    <div class="post-content">
                                        <!-- Optional Category Badge -->
                                        <span
                                            style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--accent-color); font-weight: 700; margin-bottom: 8px; display: block;">Article</span>

                                        <h3>
                                            <%= post.title %>
                                        </h3>
                                        <p class="post-excerpt">
                                            <%= post.body.replace(/(<([^>]+)>)/gi, "").substring(0, 120) %>...
                                        </p>
                                        <span class="read-more-btn">Read More <i class="fas fa-arrow-right"></i></span>
                                    </div>
                    </a>
                </article>
                <% }) %>
        </div>

        <!-- Pagination -->
        <% if (nextPage !==null || current> 1) { %>
            <div class="pagination reveal" style="display: flex; justify-content: center; gap: 20px; margin-top: 80px;">
                <% if (current> 1) { %>
                    <a href="/articles?page=<%= parseInt(current) - 1 %>" class="btn-primary"
                        style="background: transparent; color: var(--text-color); border: 1px solid var(--border-color); display: flex; align-items: center; gap: 8px; box-shadow: none;">
                        <i class="fas fa-arrow-left"></i> Newer Posts
                    </a>
                    <% } %>

                        <% if (nextPage !==null) { %>
                            <a href="/articles?page=<%= nextPage %>" class="btn-primary"
                                style="background: transparent; color: var(--text-color); border: 1px solid var(--border-color); display: flex; align-items: center; gap: 8px; box-shadow: none;">
                                Older Posts <i class="fas fa-arrow-right"></i>
                            </a>
                            <% } %>
            </div>
            <% } %>
    </section>
</div>